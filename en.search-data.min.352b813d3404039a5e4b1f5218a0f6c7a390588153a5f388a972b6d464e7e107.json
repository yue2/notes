[{"id":0,"href":"/notes/docs/git_nginx/","title":"Git_nginx","section":"Docs","content":"Push local files to NGINX using GIT #  objectives #   install git in virtual machine connect local git to VPS push local static site to VPS configure NGINX to host the site  returned error message  The requested ULR returned error: 403\non stack overflow it says 403 is a credential error. Git can only be accessed by ssh key. So we need to generate ssh key pair to connect local files to my vps with this tutorial.\n重新来 #  1. #  su - gitter mkdir hugoblog.git git --bare init 问题来了，bare git 不能看到文件，所以也不能从这个文件夹host static html files\n2. #  go to user gitter  su - gitter\ngenerate ssh key pairs in root directory\nmkdir -p ~/.ssh \u0026amp;\u0026amp; chmod 0700 ~/.ssh gitter@midofnowhere:~$ touch ~/.ssh/authorized_keys gitter@midofnowhere:~$ chmod 0600 ~/.ssh/authorized_keys gitter@midofnowhere:~$ git init --bare ~/hugoblog.git Initialized empty Git repository in /home/gitter/hugoblog.git/ check local ssh keygen in local git bash  cat ~/.ssh/id_rsa.pub then copy the keygen to vps authorized key file.\ngo to local git bash\ngit init git remote set-url origin gitter@myip:hugoblog.git git add . git commit -m \u0026quot;commit message\u0026quot; git push --set-upstream origin main ##no branches in remote git yet so set up a main branch successfully pushed. How to check the files on vps?\nBare git does not allow viewing files directly. It only contains version control. Need to use hook to deploy static html files.\nchanged mind #  I deleted the bare git and initialized a new \u0026ldquo;normal\u0026rdquo; git. Just:\nrm rf -thebare.git mkdir new.git \u0026amp;\u0026amp; cd new.git git init 3. #  basic operations for git\ngit branch \u0026lt;new branch name\u0026gt; git checkout \u0026lt;go to the branch need to checkout\u0026gt; git branch -a ##display all branches git branch \u0026lt;branch name\u0026gt; --set-upstream-to remotes/origin/\u0026lt;branch name\u0026gt; cannot push to the branch currently checked out according to this stack overflow qs so I created a temporary branch  git branch temp \u0026amp;\u0026amp; git checkout temp then push from local repository.\nSuccessfully pushed.\n4. #  Write nginx configuration file using this tutorial and this one from nginx documentation.\nneed sudo 权限 for the user gitter\nin root  usermod -aG sudo gitter then in gitter sudo nano blog.midofnowhere.\nCould not start nginx server.\nnginx -t #[emerg] a duplicate default server for 0.0.0.0:80 in /etc/nginx/sites-enabled/default:22 # configuration file /etc/nginx/nginx.conf test failed change portal to 8082. NGINX can start but cannot reach from browser.\n"},{"id":1,"href":"/notes/docs/nginx-config-10-08/","title":"Nginx Config 10 08","section":"Docs","content":"objectives #   unlink wordpress with NGINX 端口 upload static Hugo site configurate nginx 让 hugo site \u0026amp; other service占用不同端口  wordpress #  log in to server\nsu - author to change to the author user. Author user is for wordpress and in sudo group. Installed according to the tutorial. Database error when docker-compose. Put down first.\nUpload static Hugo site #  hugo site generated. Then try to push to vps.\nAdd a new user for static site  adduser hugo\nnew password: ?qeT5rU5\radd a subdomain name from DNS.\n notes.midofnowher.link for documentation.  blog.midofnowhere.link for blog. Both are hugo generated static sites. IP directed to the same VPS. 参考教程.\n"},{"id":2,"href":"/notes/docs/publish-hugo-on-github/","title":"Publish Hugo on Github","section":"Docs","content":"Publish Hugo on Github #  objectives #   generate hugo site locally push generated site - in /public to github use github page to view the site   set github action to automatically push use git to push to my VPS host on my domain  work #  generate site locally #  To generate the site in hugo, cd in the site root, run hugo, the site will be generated in /public 目录。\nproblems:\n don\u0026rsquo;t work if the site folder is in an external disk.  move to a local disk solved the problem.   themes don\u0026rsquo;t render  stackoverflow qs looks like problem with the base url changed to github page url and run hugo again. solved the problem.    push to github #  in the site public folder, run\ninit git\rgit add .\rgit remote add origin https://github.com/username/repository.git\rgit commit -m \u0026quot;commit message\u0026quot;\rgit push origin main\r## other commands\rgit remote -v ## to check remote\rgit remote set-url origin https://github.com/username/anotherrepository.git ## to change remote git\rview on github pages #  In github repo settings, check pages. Set main branch as the page source.\n"},{"id":3,"href":"/notes/docs/publish-hugo-on-nginx/","title":"Publish Hugo on Nginx","section":"Docs","content":"Publish Static Hugo Site on VPS with NGINX #  objectives #   install git on VPS push local site to VPS using git configurate NGINX to host site   publish another site using 另一个端口，configurate NGINX certbot?  "}]